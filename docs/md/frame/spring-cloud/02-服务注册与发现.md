服务注册中心是微服务架构中对服务的位置信息、心跳信息、元数据信息进行管理的重要基础，注册中心通过中心化、动态化的方式管理众多微服务实例。降低服务间的耦合度，避免硬编码服务地址和端口。

服务注册与服务发现之间是一种生产者与消费者模型，服务注册是生产者将自己的服务元数据信息上传到服务注册表中的过程，而服务发现是一个消费者通过服务注册表实现获取可用生产者的服务信息的过程。

#### 1. 服务注册的方式

* 自注册

  > 服务提供方在启动服务室自己把提供服务的IP和端口发送到注册中心，并通过心跳的方式维持健康状态；服务下线是，自己把相应的数据删除

* 第三方注册

  > 第三方的系统在服务启动或停止时向注册中心增加或者删除服务数据。

* 注册中心主动同步

  > 将注册中心和调度或者发布订阅系统打通，注册中心主动同步最新的服务IP列表。

#### 2. 服务发现的方式

* 客户端服务发现
* 服务端服务发现

#### 3. 注册中心与CAP

CAP理论下，一个分布式系统最多只能同时满足一致性(Consistency)、可用性(Availability)、分区容错性(Partition tolerance)三项中的两项。

一致性：指所有节点在同一时刻的数据完全一致

可用性：指服务一直能在正常时间范围内给予正常响应。

分区容错性：指在遇到某个节点或网络分区故障时，仍然能够对外提供服务。

分布式系统中，为避免单点故障，分区容错是必须的。对于注册中心而言，只能从CP(优先保证数据一致性)、AP(优先保证数据可用性)选择适合业务场景的。

Consul：使用CP原则

ZooKeeper： 使用CP原则

Etcd：使用CP原则

Nacos：注册中心 AP原则

#### 4. 注册中心组件手册

* [Nacos](https://nacos.io/docs/latest/)

* [Etcd]([etcd](https://etcd.io/))

* [Consul](https://www.consul.io/)